---
layout: post
category: 技术
title:  困惑
tagline: by jacky
duoshuo: true
tags: [java,gradle,maven]
date: 2014-09-05
---

##起因 @ 2014-9-5

这两天一直被一个乱码问题所困扰,

起因要做自动化部署,

<!-- more -->

于是决定用gradle作为发布工具,主要是因为groovy我也比较熟悉,

其和maven整合比较紧密,

但是工程发布以后,

怎么就表现不正常呢?怎么就出现乱码呢? 

    1.首先怀疑工作空间字符集?  检查没问题.

    1.然后怀疑加载XML的字符集加载不匹配?  检查没问题.
     
    1.编译程序没使用指定字符集? 检查没问题.
    
    1.容器URL连接字符集问题? 检查没问题.
    
    1.请求响应头? 检查没问题.
    
    1. response在处理前被打开过? 检查没问题
    
到这个时候我已经处在了崩溃的边缘,我该怎么办呢? 使用 eclipse 自动编译的就没问题.
相同的工程放置在不同的容器里表现就是不正常.

突然,我想起来 直接返回字符串试试?结果是中文,那么在本类里定义字串呢?经过测试也没问题,
自己写的一个VO对象中文就有问题,又经过一系列痛苦的测试,终于找到了问题,

>  @XmlType(propOrder = { "......."})

这个注解导致了问题,但是如何解决????

~~且看下回分解......~~

##解决 @ 2014-9-11

直道今天终于解决了这个问题,

解决办法虽然很简单,

但是寻找原因真的太痛苦了.

只需在启动TOMCAT的时候加入JVM参数

> -Dfile.encoding=utf-8 

同时保证JAVA编译强制编码

> ecoding=utf-8

 > last update @ 2014-09-11 19:01 pm  by jack 